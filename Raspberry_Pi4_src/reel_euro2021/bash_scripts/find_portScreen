#!/bin/bash


printf "
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
              \e[34m*\e[0m                                      \e[34m*************\e[0m                                                                
              \e[34m*\e[0m                                  \e[34m******\e[0m            \e[34m*\e[0m                                                              
               \e[34m*\e[0m                               \e[34m***\e[0m                                                                                
               \e[34m*\e[0m                            \e[34m***\e[0m                                                                                   
               \e[34m*\e[0m                          \e[34m**\e[0m                                                                                      
               \e[34m**\e[0m                      \e[34m***\e[0m                       \e[34m********\e[0m                                                         
               \e[34m**\e[0m                    \e[34m**\e[0m     \e[34m*\e[0m \e[34m* \e[0m \e[34m * ***\e[0m  \e[34m*\e[0m  \e[34m****\e[0m   \e[34m**********\e[0m                                                      
               \e[34m**\e[0m                  \e[34m**\e[0m       \e[34m*\e[0m \e[34m* * * ***\e[0m \e[34m***\e[0m   \e[34m*\e[0m     \e[34m**********\e[0m                                                     
               \e[34m**\e[0m                \e[34m*\e[0m          \e[34m*\e[0m \e[34m*\e[0m \e[34m  * ***\e[0m \e[34m*\e[0m \e[34m*\e[0m   \e[34m*\e[0m       \e[34m*********\e[0m                                                    
                \e[34m**\e[0m            \e[34m**\e[0m                                       \e[34m*******\e[0m                                                    
                \e[34m**\e[0m                                                           \e[34m**\e[0m                                \e[30m**\e[0m         \e[30m**\e[0m      
                \e[31m***\e[0m                    \e[31m*************\e[0m                                                           \e[30m***\e[0m       \e[30m***\e[0m      
               \e[31m****\e[0m        \e[31m**********\e[0m  \e[31m*************\e[0m    \e[31m*********\e[0m   \e[31m**********\e[0m    \e[31m*********\e[0m   \e[31m***********\e[0m  \e[31m**\e[0m   \e[30m***\e[0m      \e[30m***\e[0m      
               \e[31m*****\e[0m      \e[31m***********\e[0m  \e[31m*************\e[0m   \e[31m***********\e[0m  \e[31m***********\e[0m  \e[31m***********\e[0m  \e[31m************\e[0m \e[31m**\e[0m    \e[30m**\e[0m     \e[30m***\e[0m       
              \e[31m******\e[0m      \e[31m****  *****\e[0m  \e[31m*************\e[0m  \e[31m************\e[0m  \e[31m***********\e[0m  \e[31m***********\e[0m  \e[31m***********\e[0m  \e[31m**\e[0m     \e[30m********\e[0m        
             \e[31m********\e[0m     \e[31m****  *****\e[0m  \e[31m*************\e[0m  \e[31m**\e[0m        \e[31m**\e[0m  \e[31m***********\e[0m  \e[31m**\e[0m       \e[31m**\e[0m       \e[31m**\e[0m      \e[31m**\e[0m     \e[30m********\e[0m        
\e[34m***\e[0m          \e[31m*********\e[0m    \e[31m***********\e[0m  \e[31m*************\e[0m  \e[31m**\e[0m        \e[31m**\e[0m  \e[31m***********\e[0m  \e[31m**\e[0m       \e[31m**\e[0m       \e[31m**\e[0m      \e[31m**\e[0m     \e[30m********\e[0m        
 \e[34m***********\e[31m***\e[0m    \e[31m***\e[0m    \e[31m***********\e[0m  \e[31m**\e[0m      \e[31m***\e[0m    \e[31m***\e[0m       \e[31m**\e[0m  \e[31m***********\e[0m  \e[31m**\e[0m       \e[31m**\e[0m       \e[31m**\e[0m      \e[31m**\e[0m    \e[30m***\e[0m    \e[30m***\e[0m       
         \e[34m**\e[31m***\e[0m      \e[31m***\e[0m   \e[31m***********\e[0m  \e[31m**\e[0m       \e[31m***\e[0m   \e[31m************\e[0m  \e[31m***********\e[0m  \e[31m***********\e[0m       \e[31m**\e[0m      \e[31m**\e[0m   \e[30m***\e[0m     \e[30m***\e[0m       
           \e[31m**\e[0m        \e[31m**\e[0m   \e[31m***********\e[0m  \e[31m**\e[0m        \e[31m***\e[0m  \e[31m************\e[0m  \e[31m***********\e[0m  \e[31m***********\e[0m       \e[31m**\e[0m      \e[31m**\e[0m   \e[30m**\e[0m       \e[30m***\e[0m      
           \e[31m**\e[0m        \e[31m***\e[0m   \e[31m**********\e[0m  \e[31m**\e[0m         \e[31m**\e[0m   \e[31m*********\e[0m    \e[31m**********\e[0m    \e[31m*********\e[0m        \e[31m**\e[0m      \e[31m**\e[0m  \e[30m***\e[0m        \e[30m**\e[0m      
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  

"  > "$(tty)"

for sysdevpath in $(find /sys/bus/usb/devices/usb*/ -name dev); do
    (
        syspath="${sysdevpath%/dev}"
        devname="$(udevadm info -q name -p $syspath)"
        [[ "$devname" == "bus/"* ]] && exit
        eval "$(udevadm info -q property --export -p $syspath)"
        [[ -z "$ID_SERIAL" ]] && exit
        echo "/dev/$devname - $ID_SERIAL"
    )
done | grep tty > $(rospack find reel_euro2021)/config/ports.port



stm=$(echo "$(rospack find reel_euro2021)/config/stm.port"  )
lidar=$(echo "$(rospack find reel_euro2021)/config/lidar.port"  )
screen=$(echo "$(rospack find reel_euro2021)/config/screen.port"  )
arduino=$(echo "$(rospack find reel_euro2021)/config/arduino.port"  )

echo -n $(cat $(rospack find reel_euro2021)/config/ports.port | grep rduino  | cut -d'-' -f1) > $(rospack find reel_euro2021)/config/arduino.port 
echo -n $(cat $(rospack find reel_euro2021)/config/ports.port | grep ectronics | grep -v 066AFF535748775187123035 | cut -d'-' -f1) > $(rospack find reel_euro2021)/config/stm.port 
echo -n $(cat $(rospack find reel_euro2021)/config/ports.port | grep ectronics | grep 066AFF535748775187123035 | cut -d'-' -f1) > $(rospack find reel_euro2021)/config/screen.port 
echo -n $(cat $(rospack find reel_euro2021)/config/ports.port | grep ilicon | cut -d'-' -f1 ) > $(rospack find reel_euro2021)/config/lidar.port 
ar=0
st=0
sc=0
li=0

if [ -s $(rospack find reel_euro2021)/config/arduino.port ]
then
ar=1
fi
if [ -s $(rospack find reel_euro2021)/config/stm.port ]
then
st=1
fi
if [ -s $(rospack find reel_euro2021)/config/screen.port ]
then
sc=1
fi
if [ -s $(rospack find reel_euro2021)/config/lidar.port ]
then
li=1
sudo chmod 777 $(cat $(rospack find reel_euro2021)/config/lidar.port)
fi


ok=1
if [ $ar -eq 0 ]
then
echo -e "\e[1;41mARDUINO NOT CONNECTED !!!!! :( :( :( \e[1;m" > "$(tty)"
ok=0
else
echo -e "\033[42mARDUINO  CONNECTED !!!!! :( :( :( \e[1;m" > "$(tty)"
fi
if [ $st -eq 0 ]
then
echo -e "\e[1;41mSTM NOT CONNECTED !!!!! :( :( :( \e[1;m" > "$(tty)"
ok=0
else
echo -e "\033[42mSTM  CONNECTED !!!!! :( :( :( \e[1;m" > "$(tty)"

fi
if [ $sc -eq 0 ]
then
echo -e "\e[1;41mSCREEN NOT CONNECTED !!!!! :( :( :( \e[1;m" > "$(tty)"
ok=0
else
echo -e "\033[42mSCREEN CONNECTED !!!!! :( :( :( \e[1;m" > "$(tty)"
fi
if [ $li -eq 0 ]
then
echo -e "\e[1;41mLIDAR NOT CONNECTED !!!!! :( :( :( \e[1;m" > "$(tty)"
ok=0
else
echo -e "\033[42mLIDAR  CONNECTED !!!!! :( :( :( \e[1;m" > "$(tty)"

fi
 
if [ $ok -eq 1 ]
 then   echo -e "\e[1;41mSUUCCESS ALL DEVICES ARE CONNECTED :) :) :) \e[1;m" > "$(tty)"
#   printf " 
# *******************************************■■■■■******************************************
# ******************************************■■■■■■■*****************************************
# *****************************************■■■■■■■■■****************************************
# *****************************************■■■■■■■■■****************************************
# ****************************************■■■■■■■■■■■***************************************
# ***************************************■■■■■■■■■■■■■**************************************
# ***************************************■■■■■■■■■■■■■**************************************
# **************************************■■■■■■■■■■■■■■■*************************************
# **************************************■■■■■■■■■■■■■■■*************************************
# *************************************■■■■■■■■■■■■■■■■■************************************
# ************************************■■■■■■■■■■■■■■■■■■■***********************************
# ************************************■■■■■■■■■■■■■■■■■■■***********************************
# ***********************************■■■■■■■■■■■■■■■■■■■■■**********************************
# **********************************■■■■■■■■■■■■■■■■■■■■■■**********************************
# **********************************■■■■■■■■■■■■■■■■■■■■■■■*********************************
# *********************************■■■■■■■■■■■■■■■■■■■■■■■■*********************************
# *********************************■■■■■■■■■■■■■■■■■■■■■■■■*********************************
# *********************************■■■■■■■■■■■■■■■■■■■■■■■■*********************************
# **********************************■■■■■■■■■■■■■■■■■■■■■■■*********************************
# **********************************■■■■■■■■■■■■■■■■■■■■■■**********************************
# ************************************■■■■■■■■■■■■■■■■■■■***********************************
# *******************************************■■■■■******************************************
# *******************************************■■■■■******************************************
# *******************************************■■■■■******************************************
# *******************************************■■■■■**********■■■■■■■■■■■■■*******************
# *******************************************■■■■■*********■■■■■■■■■■■■■■■■*****************
# *******************************************■■■■■********■■■■■■■■■■■■■■■■■*****************
# *******************************************■■■■■*******■■■■■■■■■■■■■■■■■■■****************
# *******************************************■■■■■*******■■■■■■■■■■■■■■■■■■■****************
# *********************■■■■■■■■**************■■■■■*******■■■■■■■■■■■■■■■■■■■****************
# *******************■■■■■■■■■■■*************■■■■■*******■■■■■■■■■■■■■■■■■■■****************
# ******************■■■■■■■■■■■■■■***********■■■■■*******■■■■■■■■■■■■■■■■■■■****************
# *****************■■■■■■■■■■■■■■■***********■■■■■*******■■■■■■■■■■■■■■■■■■■****************
# *****************■■■■■■■■■■■■■■■■**********■■■■■*******■■■■■■■■■■■■■■■■■■■****************
# ****************■■■■■■■■■■■■■■■■■**********■■■■■*******■■■■■■■■■■■■■■■■■■■****************
# ****************■■■■■■■■■■■■■■■■■■*********■■■■■*******■■■■■■■■■■■■■■■■■■■****************
# ****************■■■■■■■■■■■■■■■■■■*********■■■■■*******■■■■■■■■■■■■■■■■■■■****************
# ****************■■■■■■■■■■■■■■■■■■*********■■■■■*******■■■■■■■■■■■■■■■■■■■****************
# ****************■■■■■■■■■■■■■■■■■■*********■■■■■*******■■■■■■■■■■■■■■■■■■■****************
# ****************■■■■■■■■■■■■■■■■■■*********■■■■■********■■■■■■■■■■■■■■■■■■****************
# ****************■■■■■■■■■■■■■■■■■■*********■■■■■*********■■■■■■■■■■■■■■■■*****************
# *****************■■■■■■■■■■■■■■■■**********■■■■■**********■■■■■■■■■■■■■*******************
# *****************■■■■■■■■■■■■■■■■**********■■■■■**************■■■■■■**********************
# ******************■■■■■■■■■■■■■■***********■■■■■**************■■■■■■**********************
# *******************■■■■■■■■■■■■************■■■■■**************■■■■■■**********************
# ********************■■■■■■■■■■*************■■■■■**************■■■■■■**********************
# **********************■■■■■■***************■■■■■**************■■■■■■**********************
# **********************■■■■■■***************■■■■■*************■■■■■■***********************
# **********************■■■■■■***************■■■■■************■■■■■■■***********************
# **********************■■■■■■***************■■■■■***********■■■■■■■■***********************
# **********************■■■■■■***************■■■■■*********■■■■■■■■■************************
# **********************■■■■■■■**************■■■■■********■■■■■■■■■*************************
# ***********************■■■■■■■*************■■■■■******■■■■■■■■■■**************************
# ***********************■■■■■■■■■***********■■■■■*****■■■■■■■■■■***************************
# ************************■■■■■■■■■**********■■■■■***■■■■■■■■■■*****************************
# *************************■■■■■■■■■*********■■■■■**■■■■■■■■■■******************************
# **************************■■■■■■■■■■*******■■■■■■■■■■■■■■■■*******************************
# ****************************■■■■■■■■■******■■■■■■■■■■■■■■*********************************
# *****************************■■■■■■■■■*****■■■■■■■■■■■■■**********************************
# ******************************■■■■■■■■■■***■■■■■■■■■■■************************************
# ********************************■■■■■■■■■**■■■■■■■■■■*************************************
# *********************************■■■■■■■■■■■■■■■■■■***************************************
# **********************************■■■■■■■■■■■■■■■■****************************************
# ************************************■■■■■■■■■■■■■*****************************************
# *************************************■■■■■■■■■■■******************************************
# **************************************■■■■■■■■■■******************************************
# ****************************************■■■■■■■■******************************************
# *****************************************■■■■■■■******************************************
# ******************************************■■■■■■■*****************************************
# *****************************************■■■■■■■■■****************************************
# ***************************************■■■■■■■■■■■■■**************************************
# **************************************■■■■■■■■■■■■■■■*************************************
# *************************************■■■■■■■■■■■■■■■■■************************************
# ************************************■■■■■■■■■■■■■■■■■■■***********************************
# ************************************■■■■■■■■■■■■■■■■■■■***********************************
# ***********************************■■■■■■■■■■■■■■■■■■■■■**********************************
# ***********************************■■■■■■■■■■■■■■■■■■■■■**********************************
# ***********************************■■■■■■■■■■■■■■■■■■■■■**********************************
# ***********************************■■■■■■■■■■■■■■■■■■■■■**********************************
# ***********************************■■■■■■■■■■■■■■■■■■■■■**********************************
# ***********************************■■■■■■■■■■■■■■■■■■■■■**********************************
# ***********************************■■■■■■■■■■■■■■■■■■■■■**********************************
# ***********************************■■■■■■■■■■■■■■■■■■■■■**********************************
# ************************************■■■■■■■■■■■■■■■■■■■***********************************
# ************************************■■■■■■■■■■■■■■■■■■■***********************************
# *************************************■■■■■■■■■■■■■■■■■************************************
# **************************************■■■■■■■■■■■■■■■*************************************
# ***************************************■■■■■■■■■■■■■**************************************
# ****************************************■■■■■■■■■■■***************************************
# ******************************************■■■■■■■*****************************************
# " > "$(tty)"

#  else
#     printf  "\e[31m
# ******************************************************************************************
# ***************************************■■■■■■■■■■■■***************************************
# ************************************■■■■■********■■■■■************************************
# **********************************■■■****************■■■**********************************
# ********************************■■■********************■■■********************************
# *******************************■■■**********************■■■*******************************
# ******************************■■**************************■■******************************
# *****************************■■****************************■■*****************************
# ****************************■■******************************■■****************************
# ***************************■■********************************■■***************************
# **************************■■**********************************■■**************************
# **************************■■**********************************■■**************************
# *************************■■************■***********************■■*************************
# *************************■*****■■*****■■*********■■******■■*****■*************************
# ************************■■******■■***■■***********■■****■■******■■************************
# ************************■■*******■■*■■*************■■**■■********■************************
# ************************■*********■■■***************■■■■*********■************************
# ***********************■■*********■■■***************■■■**********■■***********************
# ***********************■■********■■■■■**************■■■■*********■■***********************
# ***********************■********■■***■■************■■**■■*********■***********************
# ***********************■*******■■*****■■**********■■****■■********■***********************
# ***********************■*******■*******■*********■■******■■*******■***********************
# ***********************■******************************************■***********************
# ***********************■******************************************■***********************
# ***********************■******************************************■***********************
# ***********************■******************************************■***********************
# ***********************■*******■■■■■■■■■■■■■■■■■■■■■■■■■■■■■******■***********************
# ***********************■■******■■■■■■■■■■■■■■■■■■■■■■■■■■■■■*****■■***********************
# ***********************■■************************■******■■*******■■***********************
# ************************■************************■******■■*******■************************
# ************************■■***********************■******■■******■■************************
# ************************■■***********************■******■■******■■************************
# *************************■***********************■■*****■*******■*************************
# *************************■■***********************■■***■■******■■*************************
# **************************■■***********************■■■■■******■■**************************
# ***************************■**********************************■***************************
# ***************************■■********************************■■***************************
# ****************************■■******************************■■****************************
# *****************************■■****************************■■*****************************
# ******************************■■**************************■■******************************
# *******************************■■■**********************■■■*******************************
# *********************************■■********************■■*********************************
# **********************************■■■■**************■■■■**********************************
# ************************************■■■■■********■■■■■************************************
# ***************************************■■■■■■■■■■■■***************************************
# ******************************************************************************************
# ******************************************************************************************
# ******************************************************************************************
# *************************■***■■****■*****■■■**■■***■■■****■■***■■■************************
# ************************■■**■**■**■■*****■****■*■**■**■**■**■**■*■■***********************
# ***********************■*■**■**■*■*■*****■■■**■*■**■**■*■***■**■*■************************
# ***********************■■■■*■**■*■■■■****■****■■■**■*■**■***■**■■■************************
# *************************■**■*■****■*****■******■**■**■**■*■■**■*■■***********************
# ******************************************************************************************
# ******************************************************************************************
# ******************************************************************************************
# "  > "$(tty)"

 

  fi


#python3 ~/AeroBotiX_euro2021/src/reel_euro2021/scripts/screenReciever.py > "$(tty)"
